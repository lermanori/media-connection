(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["01b82ffc"],{"2cbd":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-gutter-md"},[s("div",{staticClass:"text-center"},[s("h1",[t._v(t._s(t.group.group_name))])]),s("div",{staticClass:"row justify-center"},[s("q-card",{staticStyle:{"max-width":"700px"}},[s("q-card-section",[s("u",{staticClass:"text-caption"},[t._v("admins:")])]),s("q-card-section",[s("q-list",{attrs:{bordered:"",separator:""}},t._l(t.Admins,function(e,r){return s("q-item",{key:r},[s("div",{staticClass:"row justify-center q-gutter-sm"},[s("div",{staticClass:"col-xs-12 text-center"},[s("q-chip",{attrs:{square:"",clickable:""},on:{click:function(s){return t.$router.push("/profile/"+e._id)}}},[s("q-avatar",[s("q-img",{staticStyle:{height:"100%"},attrs:{contains:"",src:t.baseUrl+"/"+e.profilePicture}})],1),t._v("\n                  "+t._s(e.email)+"\n                ")],1)],1)])])}),1)],1)],1)],1),s("div",{staticClass:"row justify-center"},[s("q-card",{staticStyle:{"max-width":"700px"}},[s("q-card-section",[s("u",{staticClass:"text-caption"},[t._v("Permissions:")])]),s("q-card-section",[s("q-list",{attrs:{bordered:"",separator:""}},t._l(t.Members,function(e,r){return s("q-item",{key:r},[s("div",{staticClass:"row justify-center q-gutter-sm"},[s("div",{staticClass:"col-md-4 col-xs-12 text-center"},[s("q-chip",{attrs:{square:"",clickable:""},on:{click:function(s){return t.$router.push("/profile/"+e._id)}}},[s("q-avatar",[s("q-img",{key:t.baseUrl+"/"+e.profilePicture,staticStyle:{height:"100%"},attrs:{contains:"",src:t.baseUrl+"/"+e.profilePicture}})],1),t._v("\n                  "+t._s(e.email)+"\n                ")],1)],1),s("div",{staticClass:"col-md-3 col-xs-12 text-center"},[s("q-btn",{staticClass:"q-ml-md q-mt-none q-pa-xs",attrs:{label:"take out",icon:"delete"},on:{click:function(s){return t.handle_userDelete(e)}}})],1),s("div",{staticClass:"col-md-2 col-xs-12 text-center"},[s("q-btn",{staticClass:"q-ml-md q-mt-none q-pa-xs",attrs:{label:"save",icon:"save"},on:{click:function(s){return t.handle_updatePermissions(e,r)}}})],1),s("div",{staticClass:"col-md-10 col-xs-12"},[s("q-option-group",{attrs:{inline:"",options:t.options,label:"Permission:",type:"checkbox"},model:{value:t.permissions[r],callback:function(e){t.$set(t.permissions,r,e)},expression:"permissions[index]"}})],1)])])}),1)],1),s("q-card-section",[s("q-list",{attrs:{bordered:"",separator:""}},[s("q-item",[s("div",{staticClass:"row justify-center q-gutter-sm"},[s("div",{staticClass:"col-md-4 col-xs-12 text-center"},[s("q-chip",{attrs:{square:""}},[t._v("Default Permissons")])],1),s("div",{staticClass:"col-md-2 col-xs-12 text-center"},[s("q-btn",{staticClass:"q-ml-md q-mt-none q-pa-xs",attrs:{label:"save",icon:"save"},on:{click:t.handle_setDefaultPermissions}})],1),s("div",{staticClass:"col-md-10 col-xs-12"},[s("q-option-group",{attrs:{inline:"",options:t.defaultOptions,label:"Permission:",type:"checkbox"},model:{value:t.defaultPermissionsModel,callback:function(e){t.defaultPermissionsModel=e},expression:"defaultPermissionsModel"}})],1)])])],1)],1)],1)],1),s("div",{staticClass:"row justify-center"},[s("q-card",{staticStyle:{"max-width":"700px"}},[s("q-card-section",[s("u",{staticClass:"text-caption"},[t._v("Posts:")])]),s("q-card-section",[s("q-list",{attrs:{bordered:"",separator:""}},t._l(t.Posts,function(e,r){return s("q-expansion-item",{key:r,attrs:{"header-class":{"deleted-item":t.Deleted[r]}},scopedSlots:t._u([{key:"header",fn:function(){return[""!=e.path&&void 0!=e.path?s("q-item-section",{attrs:{thumbnail:""}},[s("img",{attrs:{src:t.baseUrl+e.path}})]):t._e(),s("q-item-section",{staticClass:"q-mt-sm q-gutter-md"},[s("q-item-label",[s("u",[t._v("status:")]),t._v("\n                  "+t._s(e.status)+"\n                ")]),s("q-btn",{attrs:{icon:"delete"},on:{click:function(s){return s.stopPropagation(),t.handle_removePost(e)}}})],1),s("q-item-section",{attrs:{side:"",top:""}})]},proxy:!0}],null,!0)},[s("app-post-card",{key:r,staticClass:"col-6",attrs:{post:e}})],1)}),1)],1)],1)],1),s("div",[s("q-card",{staticClass:"q-mb-xl"},[s("q-card-section",[s("q-list",{attrs:{bordered:"",separator:""}},[s("q-expansion-item",{scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{staticClass:"q-gutter-md"},[s("q-item-label",{staticClass:"text-center"},[s("u",[t._v("Delete Group")])])],1),s("q-item-section",{attrs:{side:"",top:""}})]},proxy:!0}])},[s("q-card",{staticClass:"row justify-center"},[s("q-card-actions",[s("q-btn",{staticClass:"text-center",attrs:{icon:"delete"},on:{click:t.deleteGroup_handle}})],1)],1)],1)],1)],1)],1)],1)])},n=[],i=(s("28a5"),s("a34a")),a=s.n(i),o=(s("96cf"),s("c973")),c=s.n(o),l=(s("7514"),s("5841")),u=s("3b48"),p=(s("dd43"),{components:{"app-post-card":u["a"]},data:function(){return{defaultPermissionsModel:[],deleted:[],members:[],admins:[],group:{},baseUrl:l["a"].localBaseUrl,permissions:[],options:[{label:"Requests",value:"request"},{label:"In-Process",value:"in-process",color:"green"},{label:"Waiting For Approval",value:"waiting-for-approval",color:"indigo"},{label:"default",value:"default",color:"purple"}]}},computed:{defaultOptions:function(){return this.options.filter(function(t){return"default"!=t.label})},Group:function(){var t=this;return this.$store.getters["Group/Groups"].find(function(e){return e._id==t.group._id})},Members:function(){return this.members},Admins:function(){return this.admins},Posts:function(){var t=this;return this.$store.getters["Post/getPosts"].filter(function(e){return e.groupID==t.group._id})},Deleted:function(){return this.Posts.map(function(t){return!0})}},methods:{handle_setDefaultPermissions:function(){var t=c()(a.a.mark(function t(){return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Group/setDefaultPermissions",{groupId:this.$store.getters["Group/currentGroupID"],defaultPermissions:this.defaultPermissionsModel});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handle_updatePermissions:function(){var t=c()(a.a.mark(function t(e,s){return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Group/updatePermissions",{group:this.$store.getters["Group/currentGroupID"],friend:{_id:e._id},updatedPermissions:this.permissions[s].join(" ")});case 2:return t.sent,t.next=5,this.updateData();case 5:case"end":return t.stop()}},t,this)}));function e(e,s){return t.apply(this,arguments)}return e}(),handle_userDelete:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Group/removeUser",{groupId:this.group._id,friendshipId:this.group.members.find(function(t){return t.memberUid==e.uid})._id});case 2:return t.sent,t.next=5,this.$store.dispatch("Group/syncGroups");case 5:return t.next=7,this.updateData();case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handle_removePost:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.show(e),t.next=3,this.$store.dispatch("Group/removePost",{postId:e.id,groupId:e.groupID});case 3:return t.next=5,this.$store.dispatch("Post/getAllPosts",e.id);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),show:function(t){console.log(t)},deleteGroup_handle:function(){var t=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Group/deleteGroup",this.$route.params.groupid);case 2:e=t.sent,200==e.status&&this.$router.push("/groups");case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),membersToUsers:function(){var t=c()(a.a.mark(function t(){var e,s,r,n,i;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.Group.members.filter(function(t){return"admin"!=t.role}).map(function(t){return t.memberUid}),s=this.group.members.filter(function(t){return"admin"==t.role}).map(function(t){return t.memberUid}),r=this.group.members.filter(function(t){return"admin"!=t.role}).map(function(t){return t.role.split(" ")}),t.next=5,this.$store.dispatch("Friend/transformUidToUsers",e);case 5:return n=t.sent,t.next=8,this.$store.dispatch("Friend/transformUidToUsers",s);case 8:i=t.sent,this.members=n.data.result,this.admins=i.data.result,this.permissions=r;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateData:function(){var t=c()(a.a.mark(function t(){var e=this;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Group/syncGroups");case 2:return this.group=this.$store.getters["Group/Groups"].find(function(t){return t._id==e.$route.params.groupid}),t.next=5,this.membersToUsers();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateData();case 2:return t.next=4,this.$store.dispatch("Group/getDefaultPermissions",this.$store.getters["Group/currentGroupID"]);case 4:e=t.sent,console.log(e),this.defaultPermissionsModel=e.data.defaultPermissions;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}),d=p,m=s("2877"),h=Object(m["a"])(d,r,n,!1,null,"31be0a9e",null);e["default"]=h.exports},"3b48":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"card"},[s("q-card-section",[s("span",{staticClass:"text-h6"},[t._v("\n      status:\n      "),s("u",[t._v(t._s(t.post.status))])])]),s("q-card-section",[t._v("\n    properties:\n    "),s("q-list",{attrs:{bordered:"",separator:""}},[s("q-item",t._l(t.post.filterdProperties,function(e,r){return s("q-item-section",{key:r},[s("q-item-label",{attrs:{overline:""}},[t._v(t._s(e.key))]),s("q-item-label",[t._v(t._s(e.value))])],1)}),1)],1)],1),t.post.commits.length>0?s("q-card-section",[t._v("\n    commits:\n    "),s("q-list",{staticClass:"q-mt-sm q-mb-md",attrs:{bordered:"",separator:""}},t._l(t.post.commits,function(e,r){return s("q-expansion-item",{key:r,scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{thumbnail:""}},[s("img",{attrs:{src:t.mybaseUrl+e.path2}})]),s("q-item-section",{staticClass:"q-mt-sm"},[s("q-item-label",[t._v(t._s(e.user.email))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.commitMessage))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(Date(e.time).split(" ").slice(0,3).join(" ")))])],1)]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-body"},[s("u",[t._v("commit message:")]),t._v("\n              "+t._s(e.commitMessage)+"\n            ")]),s("div",{staticClass:"text-body"},[s("u",[t._v("time uploaded:")]),t._v("\n              "+t._s(Date(e.time).split(" ").slice(0,5).join(" "))+"\n            ")]),s("div",{staticClass:"text-body"},[s("u",[t._v("done:")]),t._v("\n              "+t._s(e.done)+"\n            ")])])],1)],1)}),1)],1):t._e(),s("q-card-actions",{attrs:{vertical:""}},[s("q-btn",{attrs:{icon:"waiting for approval"==t.post.status?"check":"edit",color:"waiting for approval"==t.post.status?"green":"indigo",to:"/"+t.post.id+("waiting for approval"==t.post.status?"/approval":"/image-editor")}}),"approved"==t.post.status?s("q-btn",{attrs:{icon:"share",color:"pink"},on:{click:function(e){return t.handle_share(t.post)}}}):t._e(),"approved"==t.post.status?s("q-btn",{attrs:{icon:"timer",color:"black"},on:{click:function(e){return t.handle_time(t.post)}}}):t._e()],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.openDateDialog,callback:function(e){t.openDateDialog=e},expression:"openDateDialog"}},[s("app-date-dialog",{on:{set:t.handle_set}})],1)],1)},n=[],i=s("a34a"),a=s.n(i),o=(s("96cf"),s("c973")),c=s.n(o),l=s("5841"),u=s("c181"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"300px"}},[s("q-card",[s("q-card-section",[s("h6",{staticClass:"q-my-xs"},[t._v("Enter Date And Time")])]),s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{format24h:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)]},proxy:!0}]),model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),s("q-card-actions",{attrs:{vertical:""}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{width:"100%"},attrs:{color:"green",icon:"check"},on:{click:t.handle_setTime}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{width:"100%"},attrs:{color:"red",icon:"cancel"}})],1)],1)],1)},d=[],m={data:function(){return{date:"2019-09-11",time:"21:16"}},methods:{handle_setTime:function(){this.$emit("set",{time:this.time,date:this.date})}}},h=m,f=s("2877"),v=Object(f["a"])(h,p,d,!1,null,null,null),b=v.exports,q={components:{"app-date-dialog":b},props:["post"],data:function(){return{mybaseUrl:l["a"].localBaseUrl,openDateDialog:!1,subscription:null}},methods:{handle_set:function(t){var e="".concat(t.date," ").concat(t.time),s=Date.parse(e);this.$axios.post("".concat(this.mybaseUrl,"/api/subscription/notify"),{subscription:this.subscription,message:"reminder to upload",timeToNotify:s},u["a"].axiosConfig()),console.log(s),console.log(this.subscription)},handle_share:function(t){console.log(t),navigator.share?navigator.share({title:"mc3-upload",url:"".concat(this.mybaseUrl).concat(this.post.path)}):(console.log("hey"),this.$axios({url:"".concat(this.mybaseUrl).concat(this.post.path),method:"GET",responseType:"blob"}).then(function(t){var e=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","image.png"),document.body.appendChild(s),s.click()}))},handle_time:function(){var t=c()(a.a.mark(function t(e){var s,r,n,i,o,c,p;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),!("serviceWorker"in navigator&&"PushManager"in window)){t.next=32;break}return console.log("Service Worker and Push is supported"),t.next=5,navigator.serviceWorker.ready;case 5:return s=t.sent,t.next=8,s.pushManager.getSubscription();case 8:if(r=t.sent,this.subscription=r,null!=r){t.next=29;break}return n="BFlWZsn4o7jzPoQKglsVMsxoLM9scn4Y_dCRKF9brvUbaZFIDlNjmoqKwwLdG88ny-5szJXjjB9iUpvE7z6VvrY",i={userVisibleOnly:!0,applicationServerKey:n},t.next=15,window.Notification.requestPermission();case 15:if(o=t.sent,"granted"===o){t.next=18;break}throw new Error("Permission not granted for Notification");case 18:return t.next=20,s.pushManager.subscribe(i);case 20:if(c=t.sent,"granted"!=o){t.next=27;break}return console.log(c),t.next=25,this.$axios.post(l["a"].localBaseUrl+"/api/subscription",c,u["a"].axiosConfig());case 25:p=t.sent,console.log(p);case 27:t.next=31;break;case 29:console.log("already subscribed"),console.log(r);case 31:this.openDateDialog=!0;case 32:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},x=q,g=(s("c038"),Object(f["a"])(x,r,n,!1,null,"996d181e",null));e["a"]=g.exports},c038:function(t,e,s){"use strict";var r=s("deb9"),n=s.n(r);n.a},deb9:function(t,e,s){}}]);