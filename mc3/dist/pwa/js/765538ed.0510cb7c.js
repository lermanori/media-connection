(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["765538ed"],{"23c6c":function(t,e,s){},"3b48":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"card"},[s("q-card-section",[s("span",{staticClass:"text-h6"},[t._v("\n      status:\n      "),s("u",[t._v(t._s(t.post.status))])])]),s("q-card-section",[t._v("\n    properties:\n    "),s("q-list",{attrs:{bordered:"",separator:""}},[s("q-item",t._l(t.post.filterdProperties,function(e,a){return s("q-item-section",{key:a},[s("q-item-label",{attrs:{overline:""}},[t._v(t._s(e.key))]),s("q-item-label",[t._v(t._s(e.value))])],1)}),1)],1)],1),t.post.commits.length>0?s("q-card-section",[t._v("\n    commits:\n    "),s("q-list",{staticClass:"q-mt-sm q-mb-md",attrs:{bordered:"",separator:""}},t._l(t.post.commits,function(e,a){return s("q-expansion-item",{key:a,scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{thumbnail:""}},[s("img",{attrs:{src:t.mybaseUrl+e.path2}})]),s("q-item-section",{staticClass:"q-mt-sm"},[s("q-item-label",[t._v(t._s(e.user.email))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.commitMessage))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(Date(e.time).split(" ").slice(0,3).join(" ")))])],1)]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-body"},[s("u",[t._v("commit message:")]),t._v("\n              "+t._s(e.commitMessage)+"\n            ")]),s("div",{staticClass:"text-body"},[s("u",[t._v("time uploaded:")]),t._v("\n              "+t._s(Date(e.time).split(" ").slice(0,5).join(" "))+"\n            ")]),s("div",{staticClass:"text-body"},[s("u",[t._v("done:")]),t._v("\n              "+t._s(e.done)+"\n            ")])])],1)],1)}),1)],1):t._e(),s("q-card-actions",{attrs:{vertical:""}},[s("q-btn",{attrs:{icon:"waiting for approval"==t.post.status?"check":"edit",color:"waiting for approval"==t.post.status?"green":"indigo",to:"/"+t.post.id+("waiting for approval"==t.post.status?"/approval":"/image-editor")}}),"approved"==t.post.status?s("q-btn",{attrs:{icon:"share",color:"pink"},on:{click:function(e){return t.handle_share(t.post)}}}):t._e(),"approved"==t.post.status?s("q-btn",{attrs:{icon:"timer",color:"black"},on:{click:function(e){return t.handle_time(t.post)}}}):t._e()],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.openDateDialog,callback:function(e){t.openDateDialog=e},expression:"openDateDialog"}},[s("app-date-dialog",{on:{set:t.handle_set}})],1)],1)},r=[],i=s("a34a"),o=s.n(i),n=(s("96cf"),s("c973")),c=s.n(n),l=s("5841"),u=s("c181"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"300px"}},[s("q-card",[s("q-card-section",[s("h6",{staticClass:"q-my-xs"},[t._v("Enter Date And Time")])]),s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{format24h:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)]},proxy:!0}]),model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),s("q-card-actions",{attrs:{vertical:""}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{width:"100%"},attrs:{color:"green",icon:"check"},on:{click:t.handle_setTime}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{width:"100%"},attrs:{color:"red",icon:"cancel"}})],1)],1)],1)},d=[],m={data:function(){return{date:"2019-09-11",time:"21:16"}},methods:{handle_setTime:function(){this.$emit("set",{time:this.time,date:this.date})}}},f=m,h=s("2877"),v=Object(h["a"])(f,p,d,!1,null,null,null),_=v.exports,b={components:{"app-date-dialog":_},props:["post"],data:function(){return{mybaseUrl:l["a"].localBaseUrl,openDateDialog:!1,subscription:null}},methods:{handle_set:function(t){var e="".concat(t.date," ").concat(t.time),s=Date.parse(e);this.$axios.post("".concat(this.mybaseUrl,"/api/subscription/notify"),{subscription:this.subscription,message:"reminder to upload",timeToNotify:s},u["a"].axiosConfig()),console.log(s),console.log(this.subscription)},handle_share:function(t){console.log(t),navigator.share?navigator.share({title:"mc3-upload",url:"".concat(this.mybaseUrl).concat(this.post.path)}):(console.log("hey"),this.$axios({url:"".concat(this.mybaseUrl).concat(this.post.path),method:"GET",responseType:"blob"}).then(function(t){var e=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","image.png"),document.body.appendChild(s),s.click()}))},handle_time:function(){var t=c()(o.a.mark(function t(e){var s,a,r,i,n,c,p;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),!("serviceWorker"in navigator&&"PushManager"in window)){t.next=32;break}return console.log("Service Worker and Push is supported"),t.next=5,navigator.serviceWorker.ready;case 5:return s=t.sent,t.next=8,s.pushManager.getSubscription();case 8:if(a=t.sent,this.subscription=a,null!=a){t.next=29;break}return r="BFlWZsn4o7jzPoQKglsVMsxoLM9scn4Y_dCRKF9brvUbaZFIDlNjmoqKwwLdG88ny-5szJXjjB9iUpvE7z6VvrY",i={userVisibleOnly:!0,applicationServerKey:r},t.next=15,window.Notification.requestPermission();case 15:if(n=t.sent,"granted"===n){t.next=18;break}throw new Error("Permission not granted for Notification");case 18:return t.next=20,s.pushManager.subscribe(i);case 20:if(c=t.sent,"granted"!=n){t.next=27;break}return console.log(c),t.next=25,this.$axios.post(l["a"].localBaseUrl+"/api/subscription",c,u["a"].axiosConfig());case 25:p=t.sent,console.log(p);case 27:t.next=31;break;case 29:console.log("already subscribed"),console.log(a);case 31:this.openDateDialog=!0;case 32:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},g=b,q=(s("c038"),Object(h["a"])(g,a,r,!1,null,"996d181e",null));e["a"]=q.exports},"58b8":function(t,e,s){"use strict";var a=s("23c6c"),r=s.n(a);r.a},a8df:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{key:t.item._id,staticClass:"my-card"},[s("div",{staticClass:"row justify-center"},[s("q-img",{style:{width:"250px",height:"250px"},attrs:{ratio:1,src:null!=t.item.profilePicture?t.baseUrl+"/"+t.item.profilePicture:"https://previews.123rf.com/images/salamatik/salamatik1801/salamatik180100019/92979836-profile-anonymous-face-icon-gray-silhouette-person-male-default-avatar-photo-placeholder-isolated-on.jpg"}})],1),s("q-card-section",[s("router-link",{attrs:{to:"/profile/"+t.item._id}},[s("div",{staticClass:"text-subtitle2"},[t._v(t._s(t.item.email))])])],1),s("q-card-section",[s("div",{staticClass:"row text-subtitle2 justify-center q-mb-xs"},[t._v("add user to group:")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-9"},[s("q-select",{attrs:{options:t.options},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1),s("div",{staticClass:"col-3"},[s("q-btn",{style:{height:"100%",width:"100%"},attrs:{outline:"","text-color":"primary",icon:"add"},on:{click:function(e){return t.$emit("addToGroup",{group:null==t.model?null:t.model.value,friend:t.item})}}})],1)]),s("div",{staticClass:"row justify-center q-mt-md"},[s("q-btn",{attrs:{outline:"",color:"white","text-color":"primary",label:"UnFriend"},on:{click:function(e){return t.$emit("unfriend",t.item)}}})],1)])],1)},r=[],i=s("5841"),o={props:["item","options"],data:function(){return{model:null,baseUrl:i["a"].localBaseUrl}}},n=o,c=(s("d885"),s("2877")),l=Object(c["a"])(n,a,r,!1,null,"57ca3dfc",null);e["a"]=l.exports},acc9:function(t,e,s){},c038:function(t,e,s){"use strict";var a=s("deb9"),r=s.n(a);r.a},d885:function(t,e,s){"use strict";var a=s("acc9"),r=s.n(a);r.a},deb9:function(t,e,s){},fc86:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[s("u",[t._v(t._s(t.title))])]),s("div",{staticClass:"q-pa-md q-mx-auto",staticStyle:{"max-width":"350px"}},[s("q-list",[t._l(t.filterdGroups,function(e,a){return[s("q-expansion-item",{key:a,attrs:{popup:"","default-opened":t.filterdGroups.length<2,icon:"perm_identity",label:e.group_name,caption:e.group_desc}},[s("app-group-card",{attrs:{group:e}})],1)]})],2)],1),s("q-btn",{staticClass:"q-ma-md fixed-bottom-right",attrs:{icon:"add",fab:"",color:"purple"},on:{click:function(e){t.popup=!0}}}),s("q-dialog",{model:{value:t.popup,callback:function(e){t.popup=e},expression:"popup"}},[s("q-card",{staticClass:"q-pa-md",attrs:{bordered:""}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Add a New Group")])]),s("q-card-section",[s("q-input",{attrs:{label:"Group Name"},model:{value:t.newGroup.group_name,callback:function(e){t.$set(t.newGroup,"group_name",e)},expression:"newGroup.group_name"}}),s("q-input",{attrs:{label:"Group Description"},model:{value:t.newGroup.group_desc,callback:function(e){t.$set(t.newGroup,"group_desc",e)},expression:"newGroup.group_desc"}})],1),s("q-btn",{staticClass:"shadow-24",attrs:{icon:"check",color:"cyan"},on:{click:function(e){return t.addGroup(t.newGroup)}}})],1)],1)],1)},r=[],i=s("a34a"),o=s.n(i),n=(s("96cf"),s("c973")),c=s.n(n),l=function(){var t=this,e=this,s=e.$createElement,a=e._self._c||s;return a("q-card",{staticClass:"card"},[a("q-card-section",[a("q-separator"),a("span",{staticClass:"text-caption"},[a("u",[e._v("Group Name:")]),e._v("\n      "+e._s(e.group.group_name)+"\n    ")])],1),a("q-card-section",[a("div",{staticClass:"text-caption"},[a("u",[e._v("Group description:")]),e._v("\n      "+e._s(e.group.group_desc)+"\n    ")])]),a("q-card-section",[a("div",{staticClass:"text-caption"},[a("u",[e._v("admin:")])]),a("div",{staticClass:"q-gutter-sm"},e._l(e.Members.filter(function(t){return t.uid==e.group.admin}),function(t,s){return a("q-chip",{key:s,attrs:{square:"",clickable:""},on:{click:function(s){return e.$router.push("/profile/"+t._id)}}},[a("q-avatar",[a("q-img",{staticStyle:{height:"100%"},attrs:{contains:"",src:e.mybaseUrl+"/"+t.profilePicture}})],1),e._v("\n        "+e._s(t.email)+"\n      ")],1)}),1)]),a("q-card-section"),a("q-card-section",[a("div",{staticClass:"text-caption"},[a("u",[e._v("posts:")])]),a("q-list",e._l(e.Posts,function(t,s){return a("q-expansion-item",{key:s,scopedSlots:e._u([{key:"header",fn:function(){return[""!=t.path&&void 0!=t.path?a("q-item-section",{attrs:{thumbnail:""}},[a("img",{attrs:{src:e.mybaseUrl+t.path}})]):e._e(),a("q-item-section",{staticClass:"q-mt-sm"},[a("q-item-label",[a("u",[e._v("status:")]),e._v("\n              "+e._s(t.status)+"\n            ")]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.id))])],1),a("q-item-section",{attrs:{side:"",top:""}})]},proxy:!0}],null,!0)},[a("app-post-card",{key:s,staticClass:"col-6",attrs:{post:t}})],1)}),1),a("u",{staticClass:"text-caption"},[e._v("members:")]),a("q-list",[a("div",{staticClass:"q-gutter-sm"},e._l(e.Members,function(t,s){return a("q-chip",{key:s,attrs:{square:"",clickable:""},on:{click:function(s){return e.$router.push("/profile/"+t._id)}}},[a("q-avatar",[a("q-img",{staticStyle:{height:"100%"},attrs:{contains:"",src:e.mybaseUrl+"/"+t.profilePicture}})],1),e._v("\n          "+e._s(t.email)+"\n        ")],1)}),1)])],1),a("q-separator"),a("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"around"}},[a("q-btn-group",{staticClass:"absolute-bottom",attrs:{spread:""}},[a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"cyan",to:"/grid"},on:{click:function(){return e.$store.dispatch("Group/setGroupID",t.group._id)}}},[e._v("Go To Grid")]),a("a",{attrs:{href:"https://api.instagram.com/oauth/authorize/?client_id="+e.client_id+"&redirect_uri="+e.redirect_uri+"&response_type=code"}},[a("q-btn",{staticClass:"q-mt-sm",attrs:{color:"purple"},on:{click:function(){return e.$store.dispatch("Group/setGroupID",t.group._id)}}},[e._v("sync instagram")])],1)],1)],1)],1)},u=[],p=s("5841"),d=s("3b48"),m=s("a8df"),f={props:["group"],data:function(){return{members:[],options:[],mybaseUrl:p["a"].localBaseUrl,redirect_uri:p["a"].instagramRedirect,client_id:"c0a7f25d2a7645fd82686d1f128f7409"}},computed:{Posts:function(){var t=this;return this.$store.getters["Post/getPosts"].filter(function(e){return e.groupID==t.group._id})},Members:function(){return this.members},Options:function(){return this.options}},components:{"app-post-card":d["a"],"app-friend-card":m["a"]},created:function(){var t=c()(o.a.mark(function t(){var e,s,a,r,i;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.group.members,s=e.map(function(t){return t.memberUid}),t.next=4,this.$store.dispatch("Friend/transformUidToUsers",s);case 4:return a=t.sent,this.members=a.data.result,t.next=8,this.$store.dispatch("Group/syncGroups");case 8:r=this.$store.getters["Group/Groups"],i=r.map(function(t){return{label:"".concat(t.group_name,": ").concat(t.group_desc),value:t._id}}),this.options=i;case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},h=f,v=(s("58b8"),s("2877")),_=Object(v["a"])(h,l,u,!1,null,"d7b60b48",null),b=_.exports,g=(s("c181"),{props:["title","filterFunc","mode"],data:function(){return{popup:!1,newGroup:{group_name:"",group_desc:""}}},components:{"app-group-card":b},computed:{Groups:function(){return this.$store.getters["Group/Groups"]},filterdGroups:function(){return this.Groups.filter(this.filterFunc)}},created:function(){"all"==this.mode&&this.$store.dispatch("Group/syncGroups"),this.$store.dispatch("Post/getAllPosts")},methods:{addGroup:function(){var t=c()(o.a.mark(function t(){return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Group/addGroup",this.newGroup);case 2:this.$store.dispatch("Group/syncGroups"),this.newGroup={group_name:"",group_desc:""},this.popup=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}}),q=g,x=Object(v["a"])(q,a,r,!1,null,"ecac013a",null);e["default"]=x.exports}}]);