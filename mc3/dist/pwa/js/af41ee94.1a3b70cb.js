(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["af41ee94"],{"0739":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[s("u",[t._v(t._s(t.title))])]),s("div",{staticClass:"q-pa-md q-mx-auto",staticStyle:{"max-width":"350px"}},[void 0!=t.filterdPosts.length?s("q-list",[t._l(t.filterdPosts,function(e,a){return[s("q-expansion-item",{key:a,attrs:{popup:"","default-opened":t.filterdPosts.length<2,icon:"perm_identity",label:e.status,caption:t.GroupName(e.groupID)}},[s("app-post-card",{staticClass:"q-mx-auto",attrs:{post:e}})],1)]})],2):t._e()],1),s("div",{staticClass:"row q-my-md justify-center"},[s("q-btn",{attrs:{fab:"",to:"/new-request",icon:"add",color:"cyan"}}),s("q-btn",{staticClass:"q-ml-xl",attrs:{fab:"",icon:"exit_to_app",color:"indigo",to:"/grid"}})],1),s("q-separator")],1)},n=[],o=s("a34a"),i=s.n(o),r=(s("96cf"),s("c973")),c=s.n(r),l=(s("7514"),s("3b48")),p={props:["title","filterFunc","mode"],components:{"app-post-card":l["a"]},computed:{Posts:function(){return this.$store.getters["Post/getPosts"]},filterdPosts:function(){return this.Posts.filter(this.filterFunc)}},methods:{GroupName:function(t){var e=this.$store.getters["Group/Groups"].find(function(e){return e._id==t});return void 0!=e?e.group_name:"no valid group name"}},created:function(){var t=c()(i.a.mark(function t(){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("Post/getAllPosts");case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},u=p,d=s("2877"),m=Object(d["a"])(u,a,n,!1,null,"987c8c44",null);e["default"]=m.exports},"3b48":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"card"},[s("q-card-section",[s("span",{staticClass:"text-h6"},[t._v("\n      status:\n      "),s("u",[t._v(t._s(t.post.status))])])]),s("q-card-section",[t._v("\n    properties:\n    "),s("q-list",{attrs:{bordered:"",separator:""}},[s("q-item",t._l(t.post.filterdProperties,function(e,a){return s("q-item-section",{key:a},[s("q-item-label",{attrs:{overline:""}},[t._v(t._s(e.key))]),s("q-item-label",[t._v(t._s(e.value))])],1)}),1)],1)],1),t.post.commits.length>0?s("q-card-section",[t._v("\n    commits:\n    "),s("q-list",{staticClass:"q-mt-sm q-mb-md",attrs:{bordered:"",separator:""}},t._l(t.post.commits,function(e,a){return s("q-expansion-item",{key:a,scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",{attrs:{thumbnail:""}},[s("img",{attrs:{src:t.mybaseUrl+e.path2}})]),s("q-item-section",{staticClass:"q-mt-sm"},[s("q-item-label",[t._v(t._s(e.user.email))]),s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.commitMessage))])],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(Date(e.time).split(" ").slice(0,3).join(" ")))])],1)]},proxy:!0}],null,!0)},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-body"},[s("u",[t._v("commit message:")]),t._v("\n              "+t._s(e.commitMessage)+"\n            ")]),s("div",{staticClass:"text-body"},[s("u",[t._v("time uploaded:")]),t._v("\n              "+t._s(Date(e.time).split(" ").slice(0,5).join(" "))+"\n            ")]),s("div",{staticClass:"text-body"},[s("u",[t._v("done:")]),t._v("\n              "+t._s(e.done)+"\n            ")])])],1)],1)}),1)],1):t._e(),s("q-card-actions",{attrs:{vertical:""}},[s("q-btn",{attrs:{icon:"waiting for approval"==t.post.status?"check":"edit",color:"waiting for approval"==t.post.status?"green":"indigo",to:"/"+t.post.id+("waiting for approval"==t.post.status?"/approval":"/image-editor")}}),"approved"==t.post.status?s("q-btn",{attrs:{icon:"share",color:"pink"},on:{click:function(e){return t.handle_share(t.post)}}}):t._e(),"approved"==t.post.status?s("q-btn",{attrs:{icon:"timer",color:"black"},on:{click:function(e){return t.handle_time(t.post)}}}):t._e()],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.openDateDialog,callback:function(e){t.openDateDialog=e},expression:"openDateDialog"}},[s("app-date-dialog",{on:{set:t.handle_set}})],1)],1)},n=[],o=s("a34a"),i=s.n(o),r=(s("96cf"),s("c973")),c=s.n(r),l=s("5841"),p=s("c181"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"300px"}},[s("q-card",[s("q-card-section",[s("h6",{staticClass:"q-my-xs"},[t._v("Enter Date And Time")])]),s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)]},proxy:!0}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),s("q-input",{attrs:{filled:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[s("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-time",{attrs:{format24h:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)]},proxy:!0}]),model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),s("q-card-actions",{attrs:{vertical:""}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{width:"100%"},attrs:{color:"green",icon:"check"},on:{click:t.handle_setTime}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticStyle:{width:"100%"},attrs:{color:"red",icon:"cancel"}})],1)],1)],1)},d=[],m={data:function(){return{date:"2019-09-11",time:"21:16"}},methods:{handle_setTime:function(){this.$emit("set",{time:this.time,date:this.date})}}},h=m,f=s("2877"),v=Object(f["a"])(h,u,d,!1,null,null,null),b=v.exports,g={components:{"app-date-dialog":b},props:["post"],data:function(){return{mybaseUrl:l["a"].localBaseUrl,openDateDialog:!1,subscription:null}},methods:{handle_set:function(t){var e="".concat(t.date," ").concat(t.time),s=Date.parse(e);this.$axios.post("".concat(this.mybaseUrl,"/api/subscription/notify"),{subscription:this.subscription,message:"reminder to upload",timeToNotify:s},p["a"].axiosConfig()),console.log(s),console.log(this.subscription)},handle_share:function(t){console.log(t),navigator.share?navigator.share({title:"mc3-upload",url:"".concat(this.mybaseUrl).concat(this.post.path)}):(console.log("hey"),this.$axios({url:"".concat(this.mybaseUrl).concat(this.post.path),method:"GET",responseType:"blob"}).then(function(t){var e=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","image.png"),document.body.appendChild(s),s.click()}))},handle_time:function(){var t=c()(i.a.mark(function t(e){var s,a,n,o,r,c,u;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e),!("serviceWorker"in navigator&&"PushManager"in window)){t.next=32;break}return console.log("Service Worker and Push is supported"),t.next=5,navigator.serviceWorker.ready;case 5:return s=t.sent,t.next=8,s.pushManager.getSubscription();case 8:if(a=t.sent,this.subscription=a,null!=a){t.next=29;break}return n="BFlWZsn4o7jzPoQKglsVMsxoLM9scn4Y_dCRKF9brvUbaZFIDlNjmoqKwwLdG88ny-5szJXjjB9iUpvE7z6VvrY",o={userVisibleOnly:!0,applicationServerKey:n},t.next=15,window.Notification.requestPermission();case 15:if(r=t.sent,"granted"===r){t.next=18;break}throw new Error("Permission not granted for Notification");case 18:return t.next=20,s.pushManager.subscribe(o);case 20:if(c=t.sent,"granted"!=r){t.next=27;break}return console.log(c),t.next=25,this.$axios.post(l["a"].localBaseUrl+"/api/subscription",c,p["a"].axiosConfig());case 25:u=t.sent,console.log(u);case 27:t.next=31;break;case 29:console.log("already subscribed"),console.log(a);case 31:this.openDateDialog=!0;case 32:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},_=g,q=(s("c038"),Object(f["a"])(_,a,n,!1,null,"996d181e",null));e["a"]=q.exports},c038:function(t,e,s){"use strict";var a=s("deb9"),n=s.n(a);n.a},deb9:function(t,e,s){}}]);