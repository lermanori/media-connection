(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d216d37"],{c3b3:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("q-page-container",[s("div",{staticClass:"text-center"},[t.Admin?s("q-btn",{staticClass:"fixed-bottom q-mt-xl w-100",style:{width:"100%",height:"50px"},attrs:{icon:"edit",label:"admin",color:"green",to:"/group/"+t.$store.getters["Group/currentGroupID"]+"/admin"}}):t._e(),s("div",{staticClass:"text-h6"},[t._v("Name: "+t._s(t.$store.getters["Group/Groups"].find(function(e){return e._id==t.$store.getters["Group/currentGroupID"]}).group_name))])],1),s("div",{staticClass:"row justify-center q-gutter-sm"},[s("div",{staticClass:"col-md-5 col-xs-12 q-mb-lg"},[t.Roles.find(function(t){return"waiting-for-approval"==t})||t.DefaultPermissions.find(function(t){return"waiting-for-approval"==t})||t.Admin?s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-indigo text-white text-center"},[s("div",{staticClass:"text-h6"},[t._v("Post Waiting For Approval")]),t.postLoaded?s("div",{staticClass:"text-h4"},[t._v(t._s(t.NumberOfWaitingPosts))]):t._e(),s("q-btn",{attrs:{to:"/"+t.$store.getters["Group/currentGroupID"]+"/post/waiting-for-approval"}},[t._v("to submissions")])],1)],1):t._e()],1),s("div",{staticClass:"col-md-5 col-xs-12 q-mb-lg"},[t.Roles.find(function(t){return"in-process"==t})||t.DefaultPermissions.find(function(t){return"in-process"==t})||t.Admin?s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-blue darken 4 text-white text-center"},[s("div",{staticClass:"text-h6"},[t._v("Posts In Process")]),t.postLoaded?s("div",{staticClass:"text-h4"},[t._v(t._s(t.NumberOfInProcessPosts))]):t._e(),s("q-btn",{attrs:{to:"/"+t.$store.getters["Group/currentGroupID"]+"/post/in-process"}},[t._v("to In Process")])],1)],1):t._e()],1),s("div",{staticClass:"col-md-5 col-xs-12 q-mb-lg"},[t.Roles.find(function(t){return"request"==t})||t.DefaultPermissions.find(function(t){return"request"==t})||t.Admin?s("q-card",{staticClass:"my-card"},[s("q-card-section",{staticClass:"bg-cyan text-white text-center"},[s("div",{staticClass:"text-h6"},[t._v("Posts requested")]),t.postLoaded?s("div",{staticClass:"text-h4"},[t._v(t._s(t.NumberOfNewPosts))]):t._e(),s("q-btn",{attrs:{to:"/"+t.$store.getters["Group/currentGroupID"]+"/post/requests"}},[t._v("to requests")])],1)],1):t._e()],1)])]),s("q-page-container",{staticClass:"q-mx-sm q-mb-xl"},[s("div",{staticClass:"row justify-center q-mb-md"},[s("div",{staticClass:"q-gutter-sm"},[s("q-radio",{attrs:{val:"instagram",label:"Instagram"},model:{value:t.dataMode,callback:function(e){t.dataMode=e},expression:"dataMode"}}),s("q-radio",{attrs:{val:"in-app",label:"In App"},model:{value:t.dataMode,callback:function(e){t.dataMode=e},expression:"dataMode"}}),s("q-radio",{attrs:{val:"mixed",label:"Combined"},model:{value:t.dataMode,callback:function(e){t.dataMode=e},expression:"dataMode"}})],1)]),s("div",{staticClass:"row justify-center",style:{marginBottom:"9vh"}},t._l(t.dynamicDataReverse,function(e,r){return s("div",{key:r,staticClass:"col-4"},[s("q-card",[s("q-img",{attrs:{src:e.src,ratio:"1.2"},on:{click:function(){return void 0!=e.id?t.$router.push("/post/"+e.id):null}}},[s("div",{staticClass:"absolute-bottom text-subtitle1 text-center q-pa-xs"},[t._v(t._s(t.dateToString(e.uploadTime)))])])],1)],1)}),0)])],1)},a=[],n=(s("6b54"),s("a34a")),i=s.n(n),o=(s("96cf"),s("c973")),u=s.n(o),c=(s("55dd"),s("448a")),d=s.n(c),l=(s("28a5"),s("7514"),s("5841")),p={name:"Register",data:function(){return{defaultPermissions:["in-process"],baseUrl:l["a"].localBaseUrl,username:"",password:"",auth:"true",data:[],postLoaded:!1,posts:[],dataMode:"mixed"}},computed:{InstagramData:function(){return this.data.map(function(t){return{src:t.images.standard_resolution.url,uploadTime:1e3*parseInt(t.created_time)}})},Admin:function(){var t=this;return this.$store.getters["Group/Groups"].find(function(e){return e._id==t.$store.getters["Group/currentGroupID"]}).admin==this.$store.getters["User/uid"]},Roles:function(){var t=this;return this.$store.getters["Group/Groups"].find(function(e){return e._id==t.$store.getters["Group/currentGroupID"]}).members.find(function(e){return e.memberUid==t.$store.getters["User/uid"]}).role.split(" ")},DefaultPermissions:function(){return this.defaultPermissions},NumberOfNewPosts:function(){return this.posts.filter(function(t){return"new request"===t.status}).length},NumberOfInProcessPosts:function(){return this.posts.filter(function(t){return"in process"===t.status}).length},NumberOfWaitingPosts:function(){return this.posts.filter(function(t){return"waiting for approval"===t.status}).length},ApprovedPosts:function(){var t=this;return this.posts.filter(function(t){return"approved"===t.status}).map(function(e){return{src:t.baseUrl+e.path,uploadTime:Date.parse(e.filterdProperties.find(function(t){return"upload date"==t.key}).value),id:e.id}})},mixed:function(){var t=this.ApprovedPosts,e=this.InstagramData,s=[].concat(d()(t),d()(e)),r=s;return r},dynamicData:function(){switch(this.dataMode){case"instagram":return this.InstagramData;case"mixed":return this.mixed;case"in-app":return this.ApprovedPosts;default:return this.mixed}},dynamicDataReverse:function(){return this.dynamicData.sort(function(t,e){return t.uploadTime-e.uploadTime}).reverse()}},methods:{getInstagramData:function(){var t=u()(i.a.mark(function t(){var e,s;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("https://api.instagram.com/v1/users/self/media/recent/?access_token="+this.$store.getters["User/instagram_token"]);case 2:return e=t.sent,s=e.data,this.data=s.data,t.abrupt("return");case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),dateToString:function(t){return new Date(t).toString().split(" ").filter(function(t,e){return e<5}).join(" ")}},created:function(){var t=u()(i.a.mark(function t(){var e,s=this;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.getInstagramData(),!this.Roles.find(function(t){return"default"==t})){t.next=6;break}return t.next=4,this.$store.dispatch("Group/getDefaultPermissions",this.$store.getters["Group/currentGroupID"]);case 4:e=t.sent,this.defaultPermissions=e.data.defaultPermissions;case 6:return t.next=8,this.$store.dispatch("Group/syncGroups");case 8:this.$store.dispatch("Post/getAllPosts").then(function(t){var e=s.$store.getters["Group/currentGroupID"];s.posts=t.filter(function(t){return t.groupID==e}),s.postLoaded=!0}).catch(function(t){console.log(t)});case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},f=p,m=s("2877"),h=Object(m["a"])(f,r,a,!1,null,null,null);e["default"]=h.exports}}]);